From e74a97aaf7e3f0e8d9b1f961eb68712337924720 Mon Sep 17 00:00:00 2001
From: t_feng <fengtao40@huawei.com>
Date: Thu, 18 Jun 2020 17:30:22 +0800
Subject: [PATCH] bugfix fix data encrypt weak passphrase save

---
 pyanaconda/ui/gui/spokes/lib/passphrase.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/pyanaconda/ui/gui/spokes/lib/passphrase.py b/pyanaconda/ui/gui/spokes/lib/passphrase.py
index 99ca2d4..0314d6d 100644
--- a/pyanaconda/ui/gui/spokes/lib/passphrase.py
+++ b/pyanaconda/ui/gui/spokes/lib/passphrase.py
@@ -158,7 +158,7 @@ class PassphraseDialog(GUIObject):
             self._passphrase_good_enough = True
         elif len(self._checker.failed_checks) == 1 and self._validity_check in self._checker._failed_checks:
             # only the password validity check failed
-            if self._checker.policy.strict:
+            if self._checker.policy.strict or self._strength_bar.get_value() < 2:
                 # this is not fine for the strict password policy
                 self._passphrase_good_enough = False
             else:
-- 
2.23.0

